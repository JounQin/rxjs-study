(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{160:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n.n(s),a=n(7),o=n(52),c=n.n(o),r=(n(98),n(55)),l=n.n(r),d=(n(62),n(85)),h=n.n(d),p=(n(243),n(80)),u=n.n(p),b=(n(129),n(156)),m=n(336),$=n(335),g=n(96),P=n(333),O=n(332),f=n(329),j=n(334),E=n(330),v=n(83);class C extends s.PureComponent{constructor(){super(...arguments),this.state={value:null}}componentDidMount(){this.setupSubscription()}setupSubscription(){this.subscription=this.props.children.subscribe(e=>{this.setState({value:e})})}teardownSubscription(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(e){e.children!==this.props.children&&(this.teardownSubscription(),this.setupSubscription())}componentWillUnmount(){this.teardownSubscription()}render(){return this.state.value}}const w=e=>{const t=[];return e.forEach(e=>"string"==typeof e?t.push(e):Object.keys(e).forEach(n=>{e[n]&&t.push(n)})),t};var x=n(56),y=n.n(x);const I=y.a.create()(class extends s.PureComponent{constructor(){super(...arguments),this.onPostTitleChange=(e=>{this.title=e.target.value}),this.onPostBodyChange=(e=>{this.body=e.target.value}),this.onCancel=(()=>this.props.visible$.next(!1)),this.onOk=(()=>this.props.addingPost$.next({title:this.title,body:this.body}))}render(){const{form:{getFieldDecorator:e},visible$:t}=this.props;return i.a.createElement(C,null,t.pipe(Object(g.a)(t=>i.a.createElement(u.a,{visible:t,title:"Create a new Post",okText:"Create",onCancel:this.onCancel,onOk:this.onOk},i.a.createElement(y.a,null,i.a.createElement(y.a.Item,{label:"Title"},e("title",{rules:[{required:!0,message:"Please input the title of post!"}]})(i.a.createElement(l.a,{onChange:this.onPostTitleChange}))),i.a.createElement(y.a.Item,{label:"Description"},e("description")(i.a.createElement(l.a,{type:"textarea",onChange:this.onPostBodyChange}))))))))}});n(164);const k=(e=>new class{constructor(e){this.namespace=e}block(...e){return w(e).reduce((e,t)=>`${e} ${this.namespace}--${t}`,this.namespace)}element(e,...t){return w(t).reduce((t,n)=>`${t} ${this.namespace}__${e}--${n}`,`${this.namespace}__${e}`)}}(e))("app");class S extends i.a.PureComponent{constructor(){super(...arguments),this.search$=new m.a(""),this.visible$=new m.a(!1),this.loading$=new m.a(!1),this.addingPost$=new b.a,this.addedPost$=this.addingPost$.pipe(Object(j.a)(e=>!(!e.title||!e.body)),Object(E.a)(500),Object(P.a)(()=>this.loading$.next(!0)),Object(O.a)(e=>v.a.createPost(e)),Object(P.a)(()=>this.loading$.next(!1)),Object(f.a)(null)),this.deletingPostId$=new b.a,this.deletedPostId$=this.deletingPostId$.pipe(Object(P.a)(()=>this.loading$.next(!0)),Object(O.a)(e=>v.a.deletePost(e)),Object(P.a)(()=>this.loading$.next(!1)),Object(f.a)(null)),this.posts$=Object($.a)(v.a.getPosts(),this.addedPost$,this.deletedPostId$).pipe(Object(P.a)(([e,t,n])=>{if(t&&!e.includes(t))return e.splice(0,0,t),void this.visible$.next(!1);if(!n)return;const s=e.findIndex(e=>e.id===n);s+1&&e.splice(s,1)}),Object(g.a)(([e])=>e)),this.onChange=(e=>this.search$.next(e.target.value.trim())),this.createPost=(()=>this.visible$.next(!0)),this.saveFormRef=(e=>{this.formRef=e})}deletePost(e){u.a.confirm({title:"Delete",content:"Do you confirm to delete this post?",onOk:()=>this.deletingPostId$.next(e)})}render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:k.element("header")},i.a.createElement(l.a.Search,{onChange:this.onChange}),i.a.createElement("div",{className:k.element("add-post")},i.a.createElement(c.a,{onClick:this.createPost},"Add Post"))),i.a.createElement(C,null,Object($.a)(this.posts$,this.search$,this.loading$).pipe(Object(g.a)(([e,t,n])=>(e=t?e.filter(e=>e.title.includes(t)):e,i.a.createElement(h.a,{className:k.element("list"),bordered:!0,dataSource:e,loading:n,rowKey:"id",renderItem:e=>i.a.createElement(h.a.Item,{actions:[i.a.createElement("a",{onClick:()=>this.deletePost(e.id)},"delete")]},i.a.createElement(h.a.Item.Meta,{title:e.title,description:e.body}))}))))),i.a.createElement(I,{wrappedComponentRef:this.saveFormRef,addingPost$:this.addingPost$,visible$:this.visible$}))}}(()=>Object(a.render)(i.a.createElement(S,null),document.getElementById("app")))()},164:function(e,t,n){},225:function(e,t,n){},230:function(e,t,n){},233:function(e,t,n){},236:function(e,t,n){},239:function(e,t,n){},242:function(e,t,n){},272:function(e,t,n){},278:function(e,t,n){},30:function(e,t,n){},83:function(e,t,n){"use strict";(function(e){var s=n(84),i=n(119),a=n(96),o=n(157);const c=e.env.SERVER_ENDPOINT||"https://jsonplaceholder.typicode.com/";t.a=new class{getPosts(){return i.a.getJSON(c+"posts")}createPost(e){return i.a.post(c+"posts",e,{"Content-Type":"application/json"}).pipe(Object(a.a)(({response:e})=>e),Object(o.a)(()=>Object(s.a)(null)))}deletePost(e){return i.a.delete(c+"posts/"+e).pipe(Object(a.a)(()=>e),Object(o.a)(()=>Object(s.a)(null)))}}}).call(this,n(222))}},[[160,0,1]]]);