(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{152:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),o=s(6),i=s(51),c=s.n(i),r=(s(94),s(55)),l=s.n(r),h=(s(202),s(81)),p=s.n(h),d=(s(83),s(80)),u=s.n(d),m=(s(179),s(115)),b=s.n(m),f=(s(164),s(328)),g=s(161),P=s(332),C=s(330),E=s(333),O=s(329),$=s(334),j=s(327),v=s(79);const w=e=>{const t=[];return e.forEach(e=>"string"==typeof e?t.push(e):Object.keys(e).forEach(s=>{e[s]&&t.push(s)})),t};s(158);const y=(e=>new class{constructor(e){this.namespace=e}block(...e){return w(e).reduce((e,t)=>`${e} ${this.namespace}--${t}`,this.namespace)}element(e,...t){return w(t).reduce((t,s)=>`${t} ${this.namespace}__${e}--${s}`,`${this.namespace}__${e}`)}}(e))("app"),I=l.a.create()(class extends a.PureComponent{constructor(){super(...arguments),this.addingPost={},this.onPostTitleChange=(e=>{this.addingPost.title=e.target.value}),this.onPostBodyChange=(e=>{this.addingPost.body=e.target.value}),this.onCreate=(e=>{e.preventDefault(),this.props.onCreate(this.addingPost)})}render(){const{visible:e,onCancel:t,form:{getFieldDecorator:s}}=this.props;return n.a.createElement(b.a,{visible:e,title:"Create a new Post",okText:"Create",onCancel:t,onOk:this.onCreate},n.a.createElement(l.a,null,n.a.createElement(l.a.Item,{label:"Title"},s("title",{rules:[{required:!0,message:"Please input the title of post!"}]})(n.a.createElement(p.a,{onChange:this.onPostTitleChange}))),n.a.createElement(l.a.Item,{label:"Description"},s("description")(n.a.createElement(p.a,{type:"textarea",onChange:this.onPostBodyChange})))))}});class k extends n.a.PureComponent{constructor(){super(...arguments),this.state={search:"",posts:[],isModalOpen:!1},this.search$=new f.a,this.addingPost$=new f.a,this.deletingPostId$=new f.a,this.onChange=(e=>{this.search$.next(e.target.value)}),this.createPost=(()=>{this.setState({isModalOpen:!0})}),this.cancel=(()=>{this.setState({isModalOpen:!1})}),this.confirm=(e=>{this.addingPost$.next(e)}),this.saveFormRef=(e=>{this.formRef=e})}deletePost(e){b.a.confirm({title:"Delete",content:"Do you confirm to delete this post?",onOk:()=>{this.deletingPostId$.next(e)}})}componentDidMount(){v.a.getPosts().pipe(Object(j.a)(this.search$.pipe(Object(O.a)(this.state.search)))).subscribe(([e,t])=>{t=t&&t.trim(),this.setState({search:t,posts:t?e.filter(e=>e.title.includes(t)):e})}),this.addingPost$.pipe(Object(E.a)(e=>!(!e.title||!e.body)),Object(C.a)(500),Object(P.a)(e=>v.a.createPost(e)),Object($.a)(()=>Object(g.a)(null))).subscribe(e=>{e&&this.setState({isModalOpen:!1,posts:[e,...this.state.posts]})}),this.deletingPostId$.pipe(Object(P.a)(e=>v.a.deletePost(e)),Object($.a)(()=>Object(g.a)(null))).subscribe(e=>{e&&this.setState({posts:this.state.posts.filter(t=>t.id!==e)})})}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:y.element("header")},n.a.createElement(p.a.Search,{onChange:this.onChange}),n.a.createElement("div",{className:y.element("add-post")},n.a.createElement(c.a,{onClick:this.createPost},"Add Post"))),n.a.createElement(u.a,{className:y.element("list"),bordered:!0,dataSource:this.state.posts,rowKey:"id",renderItem:e=>n.a.createElement(u.a.Item,{actions:[n.a.createElement("a",{onClick:()=>this.deletePost(e.id)},"delete")]},n.a.createElement(u.a.Item.Meta,{title:e.title,description:e.body}))}),n.a.createElement(I,{wrappedComponentRef:this.saveFormRef,visible:this.state.isModalOpen,onCancel:this.cancel,onCreate:this.confirm}))}}(()=>Object(o.render)(n.a.createElement(k,null),document.getElementById("app")))()},158:function(e,t,s){},163:function(e,t,s){},169:function(e,t,s){},172:function(e,t,s){},175:function(e,t,s){},178:function(e,t,s){},193:function(e,t,s){},199:function(e,t,s){},201:function(e,t,s){},24:function(e,t,s){},276:function(e,t,s){},79:function(e,t,s){"use strict";(function(e){var a=s(116),n=s(37);const o=e.env.SERVER_ENDPOINT||"https://jsonplaceholder.typicode.com/";t.a=new class{getPosts(){return a.a.getJSON(o+"posts")}createPost(e){return a.a.post(o+"posts",e,{"Content-Type":"application/json"}).pipe(Object(n.a)(({response:e})=>e))}deletePost(e){return a.a.delete(o+"posts/"+e).pipe(Object(n.a)(()=>e))}}}).call(this,s(159))}},[[152,0,1]]]);