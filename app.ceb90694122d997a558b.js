(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{161:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n.n(s),a=n(7),o=n(52),c=n.n(o),r=(n(100),n(55)),l=n.n(r),d=(n(62),n(88)),h=n.n(d),p=(n(244),n(82)),u=n.n(p),b=(n(131),n(337)),m=n(85),$=n(338),g=n(336),P=n(333),O=n(334),f=n(69),j=n(330),E=n(335),v=n(331),C=n(86);class w extends s.PureComponent{constructor(){super(...arguments),this.state={value:null}}componentDidMount(){this.setupSubscription()}setupSubscription(){this.subscription=this.props.children.subscribe(e=>{this.setState({value:e})})}teardownSubscription(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(e){e.children!==this.props.children&&(this.teardownSubscription(),this.setupSubscription())}componentWillUnmount(){this.teardownSubscription()}render(){return this.state.value}}const x=e=>{const t=[];return e.forEach(e=>"string"==typeof e?t.push(e):Object.keys(e).forEach(n=>{e[n]&&t.push(n)})),t};var y=n(56),I=n.n(y);const k=I.a.create()(class extends s.PureComponent{constructor(){super(...arguments),this.onPostTitleChange=(e=>{this.title=e.target.value}),this.onPostBodyChange=(e=>{this.body=e.target.value}),this.onCancel=(()=>this.props.visible$.next(!1)),this.onOk=(()=>this.props.addingPost$.next({title:this.title,body:this.body}))}render(){const{form:{getFieldDecorator:e},visible$:t}=this.props;return i.a.createElement(w,null,t.pipe(Object(f.a)(t=>i.a.createElement(u.a,{visible:t,title:"Create a new Post",okText:"Create",onCancel:this.onCancel,onOk:this.onOk},i.a.createElement(I.a,null,i.a.createElement(I.a.Item,{label:"Title"},e("title",{rules:[{required:!0,message:"Please input the title of post!"}]})(i.a.createElement(l.a,{onChange:this.onPostTitleChange}))),i.a.createElement(I.a.Item,{label:"Description"},e("description")(i.a.createElement(l.a,{type:"textarea",onChange:this.onPostBodyChange}))))))))}});n(165);const S=(e=>new class{constructor(e){this.namespace=e}block(...e){return x(e).reduce((e,t)=>`${e} ${this.namespace}--${t}`,this.namespace)}element(e,...t){return x(t).reduce((t,n)=>`${t} ${this.namespace}__${e}--${n}`,`${this.namespace}__${e}`)}}(e))("app");class D extends i.a.PureComponent{constructor(){super(...arguments),this.search$=new $.a(""),this.visible$=new $.a(!1),this.loading$=new $.a(!1),this.addingPost$=new m.a,this.addedPost$=this.addingPost$.pipe(Object(E.a)(e=>!(!e.title||!e.body)),Object(v.a)(500),Object(O.a)(()=>{this.loading$.next(!0),this.visible$.next(!1)}),Object(P.a)(e=>C.a.createPost(e)),Object(O.a)(()=>this.loading$.next(!1)),Object(j.a)(null)),this.deletingPostId$=new m.a,this.deletedPostId$=this.deletingPostId$.pipe(Object(O.a)(()=>this.loading$.next(!0)),Object(P.a)(e=>C.a.deletePost(e)),Object(O.a)(()=>this.loading$.next(!1)),Object(j.a)(null)),this.posts$=Object(b.a)(C.a.getPosts(),Object(g.a)(this.addedPost$,this.deletedPostId$)).pipe(Object(O.a)(([e,t])=>{if(!t)return;if("number"!=typeof t)return void e.splice(0,0,t);const n=e.findIndex(e=>e.id===t);n+1&&e.splice(n,1)}),Object(f.a)(([e])=>e)),this.onChange=(e=>this.search$.next(e.target.value.trim())),this.createPost=(()=>this.visible$.next(!0)),this.saveFormRef=(e=>{this.formRef=e})}deletePost(e){u.a.confirm({title:"Delete",content:"Do you confirm to delete this post?",onOk:()=>this.deletingPostId$.next(e)})}render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:S.element("header")},i.a.createElement(l.a.Search,{onChange:this.onChange}),i.a.createElement("div",{className:S.element("add-post")},i.a.createElement(c.a,{onClick:this.createPost},"Add Post"))),i.a.createElement(w,null,Object(b.a)(this.posts$,this.search$,this.loading$).pipe(Object(f.a)(([e,t,n])=>(e=t?e.filter(e=>e.title.includes(t)):e,i.a.createElement(h.a,{className:S.element("list"),bordered:!0,dataSource:e,loading:n,rowKey:"id",renderItem:e=>i.a.createElement(h.a.Item,{actions:[i.a.createElement("a",{onClick:()=>this.deletePost(e.id)},"delete")]},i.a.createElement(h.a.Item.Meta,{title:e.title,description:e.body}))}))))),i.a.createElement(k,{wrappedComponentRef:this.saveFormRef,addingPost$:this.addingPost$,visible$:this.visible$}))}}(()=>Object(a.render)(i.a.createElement(D,null),document.getElementById("app")))()},165:function(e,t,n){},226:function(e,t,n){},231:function(e,t,n){},234:function(e,t,n){},237:function(e,t,n){},240:function(e,t,n){},243:function(e,t,n){},273:function(e,t,n){},279:function(e,t,n){},31:function(e,t,n){},86:function(e,t,n){"use strict";(function(e){var s=n(87),i=n(121),a=n(69),o=n(158);const c=e.env.SERVER_ENDPOINT||"https://jsonplaceholder.typicode.com/";t.a=new class{getPosts(){return i.a.getJSON(c+"posts")}createPost(e){return i.a.post(c+"posts",e,{"Content-Type":"application/json"}).pipe(Object(a.a)(({response:e})=>e),Object(o.a)(()=>Object(s.a)(null)))}deletePost(e){return i.a.delete(c+"posts/"+e).pipe(Object(a.a)(()=>e),Object(o.a)(()=>Object(s.a)(null)))}}}).call(this,n(223))}},[[161,0,1]]]);